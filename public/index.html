<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rafa Grocery Dashboard</title>
<style>body{font-family:Arial;margin:16px;background:#f6f7fb}input{padding:10px;width:100%;max-width:520px;border:1px solid #ccc;border-radius:8px}#grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:14px}.card{background:#fff;border-radius:10px;padding:10px;box-shadow:0 1px 4px rgba(0,0,0,.08)}img{width:100%;height:130px;object-fit:cover;border-radius:8px;background:#eee}.name{font-weight:700;font-size:14px;margin:8px 0 4px}.meta{font-size:12px;color:#555}</style>
</head><body><h2>Rafa Grocery Dashboard</h2><div id='stats'>Cargando...</div><input id='q' placeholder='Buscar producto...'/><div id='grid'></div>
<script>
let data=[];const grid=document.getElementById('grid');const q=document.getElementById('q');
function render(items){grid.innerHTML=items.slice(0,200).map(p=>`<div class='card'><img src='${p.image_url||"https://via.placeholder.com/300x180?text=No+Image"}'/><div class='name'>${p.canonical_name}</div><div class='meta'>Compras: ${p.times_bought} · Avg: $${p.avg_price||'-'}<br/>Tiendas: ${p.stores||'-'}<br/>Fuente img: ${p.image_source||'-'}</div></div>`).join('')}
fetch('./data.json').then(r=>r.json()).then(j=>{data=j.products;const withImg=data.filter(x=>x.image_url).length;document.getElementById('stats').innerText=`Productos: ${j.count} · Con imagen: ${withImg}`;render(data);});
q.addEventListener('input',()=>{const s=q.value.toLowerCase().trim();if(!s)return render(data);render(data.filter(p=>p.canonical_name.toLowerCase().includes(s)));});
</script></body></html>
